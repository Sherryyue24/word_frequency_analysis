# é¡¹ç›®ç»“æ„è¯´æ˜æ–‡æ¡£
# è·¯å¾„: docs/developer/project-structure.md
# é¡¹ç›®åç§°: Word Frequency Analysis
# ä½œè€…: Sherryyue

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

æœ¬æ–‡æ¡£è¯¦ç»†è¯´æ˜äº†è¯é¢‘åˆ†æç³»ç»Ÿçš„é¡¹ç›®ç»“æ„ï¼Œç‰¹åˆ«æ˜¯æ ¸å¿ƒenginesæ¨¡å—çš„ä¸‰å±‚æ¶æ„è®¾è®¡ã€‚

### æœ€åæ›´æ–°
- **æ—¶é—´**: 2025-06-30
- **ç‰ˆæœ¬**: v1.0.0
- **é‡æ„**: enginesæ¨¡å—ä¸‰å±‚æ¶æ„å®Œæˆ

## ğŸ—ï¸ æ•´ä½“é¡¹ç›®ç»“æ„

```
word-frequency-analysis/
â”œâ”€â”€ README.md                      # é¡¹ç›®è¯´æ˜
â”œâ”€â”€ run.py                         # ç»Ÿä¸€å¯åŠ¨è„šæœ¬
â”œâ”€â”€ setup.py                       # é¡¹ç›®å®‰è£…é…ç½®
â”œâ”€â”€ config/                        # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ default.yaml              # é»˜è®¤é…ç½®
â”‚   â”œâ”€â”€ development.yaml          # å¼€å‘ç¯å¢ƒé…ç½®
â”‚   â””â”€â”€ production.yaml           # ç”Ÿäº§ç¯å¢ƒé…ç½®
â”œâ”€â”€ core/                          # æ ¸å¿ƒæ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ engines/                   # ğŸ”¥ æ ¸å¿ƒå¼•æ“æ¨¡å—ï¼ˆä¸‰å±‚æ¶æ„ï¼‰
â”‚   â”œâ”€â”€ models/                    # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ services/                  # ä¸šåŠ¡æœåŠ¡
â”‚   â””â”€â”€ utils/                     # å·¥å…·å‡½æ•°
â”œâ”€â”€ interfaces/                    # ç”¨æˆ·æ¥å£å±‚
â”‚   â”œâ”€â”€ api/                       # REST APIæ¥å£
â”‚   â”œâ”€â”€ cli/                       # å‘½ä»¤è¡Œæ¥å£
â”‚   â””â”€â”€ web/                       # Webæ¥å£ï¼ˆæœªæ¥ï¼‰
â”œâ”€â”€ data/                          # æ•°æ®å­˜å‚¨
â”‚   â”œâ”€â”€ files/                     # æ–‡ä»¶ç®¡ç†
â”‚   â”œâ”€â”€ databases/                 # æ•°æ®åº“æ–‡ä»¶
â”‚   â”œâ”€â”€ cache/                     # ç¼“å­˜æ–‡ä»¶
â”‚   â””â”€â”€ exports/                   # å¯¼å‡ºç»“æœ
â”œâ”€â”€ scripts/                       # ç»´æŠ¤è„šæœ¬
â”œâ”€â”€ docs/                          # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ tests/                         # æµ‹è¯•ä»£ç 
â””â”€â”€ deployment/                    # éƒ¨ç½²é…ç½®
```

## ğŸš€ æ ¸å¿ƒEnginesæ¨¡å—æ¶æ„

### æ¶æ„ç†å¿µ

enginesæ¨¡å—é‡‡ç”¨**ä¸‰å±‚åŠŸèƒ½æ¶æ„**ï¼ŒæŒ‰ç…§æ•°æ®æµå‘å’ŒèŒè´£åˆ†ç¦»ï¼š

```
core/engines/
â”œâ”€â”€ input/       ğŸ”½ è¾“å…¥å¤„ç†å±‚ï¼šæ–‡ä»¶å¤„ç†ã€è¯æ±‡è¡¨å¯¼å…¥
â”œâ”€â”€ vocabulary/  ğŸ”„ è¯æ±‡å¤„ç†å±‚ï¼šè¯æ±‡åˆ†æã€è¯­è¨€å­¦å¤„ç†  
â””â”€â”€ database/    ğŸ’¾ æ•°æ®æŒä¹…å±‚ï¼šæ•°æ®å­˜å‚¨ã€æ£€ç´¢ç®¡ç†
```

### è¯¦ç»†æ¨¡å—ç»“æ„

#### ğŸ”½ Input è¾“å…¥å¤„ç†æ¨¡å—

**èŒè´£**: å¤„ç†æ‰€æœ‰è¾“å…¥æ•°æ®ï¼ŒåŒ…æ‹¬æ–‡æœ¬æ–‡ä»¶å’Œè¯æ±‡è¡¨æ–‡ä»¶

```
core/engines/input/
â”œâ”€â”€ __init__.py                    # æ¨¡å—ç»Ÿä¸€å¯¼å‡º
â”œâ”€â”€ file_processor.py              # æ–‡ä»¶å¤„ç†å™¨
â”‚   â”œâ”€â”€ TextProcessor             # æ–‡æœ¬æ–‡ä»¶æ‰¹é‡å¤„ç†
â”‚   â”œâ”€â”€ FileProcessor             # å•æ–‡ä»¶å¤„ç†ï¼ˆåˆ«åï¼‰
â”‚   â””â”€â”€ åŠŸèƒ½ï¼šç¼“å­˜æ£€æŸ¥ã€æ–‡ä»¶ç§»åŠ¨ã€è¿›åº¦æ˜¾ç¤º
â”œâ”€â”€ file_reader.py                 # æ–‡ä»¶é˜…è¯»å™¨
â”‚   â”œâ”€â”€ TextReader                # å¤šæ ¼å¼æ–‡ä»¶è¯»å–
â”‚   â”œâ”€â”€ æ”¯æŒæ ¼å¼ï¼šPDFã€TXTã€DOCXã€HTMLç­‰
â”‚   â””â”€â”€ åŠŸèƒ½ï¼šæ–‡æœ¬é¢„å¤„ç†ã€ç¼–ç æ£€æµ‹ã€å…ƒæ•°æ®æå–
â””â”€â”€ modern_wordlist_import.py      # ç°ä»£åŒ–è¯æ±‡è¡¨å¯¼å…¥
    â”œâ”€â”€ import_wordlist_from_file()   # å•ä¸ªè¯æ±‡è¡¨å¯¼å…¥
    â”œâ”€â”€ import_multiple_wordlists()  # æ‰¹é‡å¯¼å…¥
    â”œâ”€â”€ get_available_wordlists()    # åˆ—å‡ºå·²å¯¼å…¥è¯æ±‡è¡¨
    â”œâ”€â”€ get_wordlist_stats()         # è¯æ±‡è¡¨ç»Ÿè®¡
    â””â”€â”€ import_wordlist_to_database() # å‘åå…¼å®¹æ¥å£
```

**æ ¸å¿ƒåŠŸèƒ½**:
- æ”¯æŒå¤šç§æ–‡æœ¬æ ¼å¼è§£æ
- æ™ºèƒ½è¯æ±‡è¡¨å¯¼å…¥ä¸éªŒè¯
- é‡å¤å†…å®¹æ£€æµ‹ï¼ˆSHA256ï¼‰
- è¯¦ç»†çš„å¯¼å…¥æŠ¥å‘Šç”Ÿæˆ
- æ–‡ä»¶çŠ¶æ€ç®¡ç†ï¼ˆnew â†’ processedï¼‰

#### ğŸ”„ Vocabulary è¯æ±‡å¤„ç†æ¨¡å—

**èŒè´£**: è¯æ±‡åˆ†æã€è¯­è¨€å­¦å¤„ç†ã€è¯é¢‘ç»Ÿè®¡

```
core/engines/vocabulary/
â”œâ”€â”€ __init__.py                    # æ¨¡å—ç»Ÿä¸€å¯¼å‡º
â””â”€â”€ word_analyzer.py               # è¯æ±‡åˆ†æå™¨
    â”œâ”€â”€ analyze_text()            # ä¸»åˆ†æå‡½æ•°
    â”œâ”€â”€ åŠŸèƒ½ï¼šè¯é¢‘ç»Ÿè®¡ã€è¯æ±‡æå–
    â”œâ”€â”€ è¯­è¨€å­¦å¤„ç†ï¼šè¯å¹²æå–ã€è¯æ€§åˆ†æ
    â””â”€â”€ ç»Ÿè®¡ä¿¡æ¯ï¼šæ€»è¯æ•°ã€å”¯ä¸€è¯æ•°ã€å…ƒæ•°æ®
```

**æ ¸å¿ƒåŠŸèƒ½**:
- æ™ºèƒ½è¯æ±‡æå–ä¸æ¸…ç†
- è¯é¢‘ç»Ÿè®¡ä¸åˆ†æ
- è¯­è¨€å­¦ç‰¹å¾æå–
- æ€§èƒ½ä¼˜åŒ–çš„æ‰¹é‡å¤„ç†

#### ğŸ’¾ Database æ•°æ®æŒä¹…å±‚æ¨¡å—

**èŒè´£**: æ•°æ®å­˜å‚¨ã€æ£€ç´¢ã€æ•°æ®åº“ç®¡ç†

```
core/engines/database/
â”œâ”€â”€ __init__.py                    # æ¨¡å—ç»Ÿä¸€å¯¼å‡º
â”œâ”€â”€ unified_database.py            # ç»Ÿä¸€æ•°æ®åº“æ ¸å¿ƒ
â”‚   â”œâ”€â”€ UnifiedDatabase           # ç°ä»£åŒ–æ•°æ®åº“ç±»
â”‚   â”œâ”€â”€ UUID-basedè®¾è®¡           # ç°ä»£åŒ–æ¶æ„
â”‚   â”œâ”€â”€ å…³è”æŸ¥è¯¢æ”¯æŒ             # å¤æ‚åˆ†æåŠŸèƒ½
â”‚   â””â”€â”€ é«˜çº§åŠŸèƒ½ï¼šTF-IDFã€ç›¸ä¼¼åº¦åˆ†æ
â””â”€â”€ database_adapter.py            # å…¼å®¹æ€§é€‚é…å™¨
    â”œâ”€â”€ UnifiedDatabaseAdapter    # ç»Ÿä¸€é€‚é…å™¨ç±»
    â”œâ”€â”€ unified_adapter          # å…¨å±€é€‚é…å™¨å®ä¾‹
    â”œâ”€â”€ å‘åå…¼å®¹æ¥å£             # å…¼å®¹æ—§API
    â””â”€â”€ æ— ç¼è¿ç§»æ”¯æŒ             # å¹³æ»‘è¿‡æ¸¡
```

**æ ¸å¿ƒåŠŸèƒ½**:
- ç°ä»£åŒ–æ•°æ®åº“è®¾è®¡ï¼ˆUUIDã€JSONå­—æ®µï¼‰
- å¼ºå¤§çš„å…³è”æŸ¥è¯¢èƒ½åŠ›
- é«˜çº§åˆ†æåŠŸèƒ½ï¼ˆç›¸ä¼¼åº¦ã€TF-IDFï¼‰
- å®Œå…¨å‘åå…¼å®¹
- äº‹åŠ¡å¤„ç†ä¸æ•°æ®å®Œæ•´æ€§

### æ¨¡å—é—´åä½œ

#### æ•°æ®æµå‘
```
è¾“å…¥æ–‡ä»¶ â†’ Inputæ¨¡å— â†’ Vocabularyæ¨¡å— â†’ Databaseæ¨¡å— â†’ ç”¨æˆ·æ¥å£
    â†“         â†“            â†“            â†“
  æ–‡ä»¶è¯»å–   æ–‡æœ¬åˆ†æ    è¯é¢‘ç»Ÿè®¡     æ•°æ®å­˜å‚¨
  æ ¼å¼è½¬æ¢   è¯æ±‡æå–    è¯­è¨€å­¦å¤„ç†   å…³è”æŸ¥è¯¢
  å†…å®¹æ ¡éªŒ   è´¨é‡è¯„ä¼°    ç»Ÿè®¡è®¡ç®—     é«˜çº§åˆ†æ
```

#### ä¾èµ–å…³ç³»
```python
# Inputæ¨¡å—ä¾èµ–
from ..vocabulary.word_analyzer import analyze_text      # è¯æ±‡åˆ†æ
from ..database.database_adapter import unified_adapter  # æ•°æ®å­˜å‚¨

# Vocabularyæ¨¡å—ä¾èµ–
from ..input.file_reader import TextReader              # æ–‡ä»¶è¯»å–å·¥å…·

# Databaseæ¨¡å—ä¾èµ–
from .unified_database import UnifiedDatabase           # æ ¸å¿ƒæ•°æ®åº“
```

## ğŸ“¦ å¯¼å…¥ä½¿ç”¨æ–¹å¼

### æ–°çš„æ¨¡å—åŒ–å¯¼å…¥

```python
# æŒ‰åŠŸèƒ½æ¨¡å—å¯¼å…¥
from core.engines import input, vocabulary, database

# ä½¿ç”¨è¾“å…¥å¤„ç†åŠŸèƒ½
from core.engines.input import FileProcessor, import_wordlist_from_file

# ä½¿ç”¨è¯æ±‡åˆ†æåŠŸèƒ½  
from core.engines.vocabulary import analyze_text

# ä½¿ç”¨æ•°æ®åº“åŠŸèƒ½
from core.engines.database import unified_adapter, UnifiedDatabase
```

### å‘åå…¼å®¹å¯¼å…¥

```python
# ä»ç„¶æ”¯æŒæ—§çš„å¯¼å…¥æ–¹å¼
from core.engines import (
    FileProcessor,           # æ–‡ä»¶å¤„ç†å™¨
    unified_adapter,         # æ•°æ®åº“é€‚é…å™¨
    analyze_text,           # è¯æ±‡åˆ†æ
    import_wordlist_from_file # è¯æ±‡è¡¨å¯¼å…¥
)
```

### CLIæ¨¡å—å¯¼å…¥

```python
# CLIä¸­çš„å…¸å‹ä½¿ç”¨
from core.engines.input.modern_wordlist_import import import_wordlist_from_file
from core.engines.database.database_adapter import unified_adapter
```

## ğŸ”§ é…ç½®ç®¡ç†

### é…ç½®æ–‡ä»¶å±‚æ¬¡

```yaml
# config/default.yaml - åŸºç¡€é…ç½®
database:
  path: "data/databases/unified.db"
  
processing:
  supported_formats: ["pdf", "txt", "docx"]
  
# config/development.yaml - å¼€å‘é…ç½®
database:
  path: "data/databases/dev_unified.db"
  debug: true

# config/production.yaml - ç”Ÿäº§é…ç½®  
database:
  path: "data/databases/prod_unified.db"
  optimization: true
```

### é…ç½®ä½¿ç”¨

```python
from core.utils.config_manager import ConfigManager

config = ConfigManager()
db_path = config.get('database.path')
formats = config.get('processing.supported_formats')
```

## ğŸ¯ æ¶æ„ä¼˜åŠ¿

### 1. æ¨¡å—åŒ–è®¾è®¡
- **èŒè´£åˆ†ç¦»**: æ¯ä¸ªæ¨¡å—ä¸“æ³¨ç‰¹å®šåŠŸèƒ½
- **ä½è€¦åˆ**: æ¨¡å—é—´ä¾èµ–æ¸…æ™°å¯æ§
- **é«˜å†…èš**: ç›¸å…³åŠŸèƒ½é›†ä¸­ç®¡ç†

### 2. æ‰©å±•æ€§å¼º
- **åŠŸèƒ½æ‰©å±•**: åœ¨å¯¹åº”æ¨¡å—æ·»åŠ æ–°åŠŸèƒ½
- **æ ¼å¼æ”¯æŒ**: åœ¨inputæ¨¡å—æ·»åŠ æ–°æ ¼å¼
- **åˆ†æç®—æ³•**: åœ¨vocabularyæ¨¡å—æ·»åŠ æ–°ç®—æ³•
- **å­˜å‚¨åç«¯**: åœ¨databaseæ¨¡å—æ”¯æŒæ–°æ•°æ®åº“

### 3. ç»´æŠ¤å‹å¥½
- **ä»£ç ç»„ç»‡**: æŒ‰åŠŸèƒ½æ¸…æ™°åˆ†ç»„
- **æµ‹è¯•ç­–ç•¥**: æ¨¡å—åŒ–å•å…ƒæµ‹è¯•
- **è°ƒè¯•ä¾¿åˆ©**: é—®é¢˜å®šä½å‡†ç¡®

### 4. å‘åå…¼å®¹
- **APIä¿æŒ**: æ‰€æœ‰åŸæœ‰æ¥å£ä¸å˜
- **æ¸è¿›è¿ç§»**: æ”¯æŒé€æ­¥é‡‡ç”¨æ–°æ¶æ„
- **æ— ç¼å‡çº§**: ç”¨æˆ·æ— æ„ŸçŸ¥åˆ‡æ¢

## ğŸ“š ç›¸å…³æ–‡æ¡£

- `unified-architecture-migration.md` - æ•°æ®åº“æ¶æ„è¿ç§»è¯¦æƒ…
- `cli-refactor.md` - CLIæ¨¡å—é‡æ„è¯´æ˜
- `data-structure.md` - æ•°æ®å­˜å‚¨ç»“æ„è¯´æ˜
- `api/` - APIæ¥å£æ–‡æ¡£ï¼ˆæœªæ¥ï¼‰

## ğŸš€ æœªæ¥è§„åˆ’

### çŸ­æœŸç›®æ ‡
1. **Webæ¥å£**: åœ¨ `interfaces/web/` å¼€å‘Webç®¡ç†ç•Œé¢
2. **APIæœåŠ¡**: åœ¨ `interfaces/api/` æä¾›RESTful API
3. **æ€§èƒ½ä¼˜åŒ–**: è¿›ä¸€æ­¥ä¼˜åŒ–å„æ¨¡å—æ€§èƒ½

### é•¿æœŸç›®æ ‡
1. **æœºå™¨å­¦ä¹ é›†æˆ**: åœ¨vocabularyæ¨¡å—é›†æˆMLç®—æ³•
2. **åˆ†å¸ƒå¼æ”¯æŒ**: åœ¨databaseæ¨¡å—æ”¯æŒåˆ†å¸ƒå¼å­˜å‚¨
3. **å®æ—¶å¤„ç†**: æ”¯æŒæµå¼æ•°æ®å¤„ç†
4. **å¯è§†åŒ–åˆ†æ**: ä¸°å¯Œçš„æ•°æ®å¯è§†åŒ–åŠŸèƒ½

è¿™ç§ä¸‰å±‚æ¶æ„è®¾è®¡ä¸ºç³»ç»Ÿæä¾›äº†æ¸…æ™°çš„ç»“æ„ã€å¼ºå¤§çš„æ‰©å±•æ€§å’Œä¼˜ç§€çš„ç»´æŠ¤æ€§ï¼Œæ˜¯ç°ä»£è½¯ä»¶æ¶æ„çš„æœ€ä½³å®è·µã€‚ 